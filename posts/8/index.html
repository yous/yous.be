<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><title>Yous</title><meta name="description" content="Blog for hackers."><link rel="stylesheet" href="/assets/main.css"><link rel="canonical" href="https://yous.be/posts/8/"><link rel="alternate" type="application/rss+xml" title="Yous" href="https://yous.be/atom.xml"><link rel="icon" type="image/x-icon" href="/favicon.ico"><link rel="icon" type="image/png" href="/icon-192x192.png"><link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/apple-touch-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/apple-touch-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon-152x152.png"><link rel="apple-touch-icon" sizes="167x167" href="/apple-touch-icon-167x167.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon-180x180.png"><link rel="mask-icon" color="#2568ba" href="/safari-pinned-tab.svg"><meta name="msapplication-TileColor" content="#2568ba"><meta name="msapplication-TileImage" content="/mstile-144x144.png"><meta property="fb:admins" content="100001802412550"><meta property="og:title" content="Yous"><meta property="og:site_name" content="Yous"><meta property="og:url" content="https://yous.be/posts/8/"><meta property="og:description" content="Blog for hackers."><meta property="og:image" content="http://yous.be/images/about/yous.png"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Yous"><meta name="twitter:description" content="Blog for hackers."><meta name="twitter:image:src" content="http://yous.be/images/about/yous.png"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Bitter:ital,wght@0,400;0,700;1,400&amp;display=swap" rel="stylesheet"> <script async src="https://www.googletagmanager.com/gtag/js?id=G-KZKJJ9M5EL"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-KZKJJ9M5EL'); </script><body><header class="site-header"><div class="wrapper"> <a class="site-title" href="/">Yous</a><nav class="site-nav"> <a class="page-link" href="/about/">About</a> <a class="page-link" href="/archives/">Archives</a></nav></div></header><main class="page-content" aria-label="Content"><div class="wrapper"><div class="home"><ul class="post-list"><li lang="ko"><header class="post-header"><h1 class="post-title"> <a class="post-link" href="https://blog.skullsecurity.org/2013/ropasaurusrex-a-primer-on-return-oriented-programming">ropasaurusrex: return-oriented programming 입문서 &rarr;</a></h1><p class="post-meta"> 2014년 3월 19일 • <a href="/categories/ctf/">CTF</a> • <a href="/2014/03/19/ropasaurusrex-a-primer-on-return-oriented-programming/">Permalink</a></p></header><div class="post-content"><p><a href="https://blog.skullsecurity.org">SkullSecurity</a>의 <a href="https://blog.skullsecurity.org/author/ron">Ron Bowes</a>가 쓴 <a href="https://blog.skullsecurity.org/2013/ropasaurusrex-a-primer-on-return-oriented-programming">return-oriented programming 입문서</a>가 있어 번역했다.</p></div><p class="post-continue"> <a href="/2014/03/19/ropasaurusrex-a-primer-on-return-oriented-programming/">계속 읽기 &rarr;</a></p><li lang="ko"><header class="post-header"><h1 class="post-title"> <a class="post-link" href="https://brianlovin.com/design-details/paper-facebook-ios">Design Details: Paper by Facebook &rarr;</a></h1><p class="post-meta"> 2014년 3월 4일 • <a href="/categories/design/">Design</a> • <a href="/2014/03/04/design-details-paper-by-facebook/">Permalink</a></p></header><div class="post-content"><p><a href="https://brianlovin.com/about">Brian Lovin</a>이 쓴 <a href="https://brianlovin.com/design-details/paper-facebook-ios">페이스북 Paper의 디자인 디테일</a>에 관한 글이다.</p><blockquote><p><a href="https://itunes.apple.com/us/app/paper-stories-from-facebook/id794163692">페이스북 Paper</a>가 나온 지 하루가 지났고 대부분의 리뷰가 <a href="https://news.ycombinator.com/item?id=7171808">다소 갈리고 있다</a>. 나는 페이스북의 열성적 팬은 아니지만, Paper의 디자인과 디테일에 쏟은 관심은 비길 데 없으며 이는 다른 디자이너들과 공유할 가치가 있다.</p></blockquote><p>Paper 앱의 애니메이션을 총 23종의 GIF 파일로 기록하고 리뷰해 놓았다. Paper 앱이 출시되고 꽤 시간이 지났지만 앱을 사용하면서 눈치채지 못했던 점이 많아 지금이라도 공유한다.</p></div><li lang="ko"><header class="post-header"><h1 class="post-title"> <a class="post-link" href="/2014/02/24/support-facebook-open-graph-and-twitter-cards-on-octopress/">Octopress에서 Facebook Open Graph와 Twitter Cards 지원하기</a></h1><p class="post-meta"> 2014년 2월 24일 • <a href="/categories/octopress/">Octopress</a></p></header><div class="post-content"><p>블로그에 글을 쓰고 나면 트위터나 페이스북에 링크를 공유하곤 하는데 페이스북의 미리보기가 적절히 표시되지 않고 있다는 사실을 깨달았다. 또한 트위터도 그와 비슷한 기능을 제공하는데, 둘 다 지원하면 좋겠다는 생각을 했다. 이를 제대로 지원하려면 <a href="https://developers.facebook.com/docs/sharing/webmasters#markup">Facebook Open Graph 마크업</a>과 <a href="https://developer.twitter.com/en/docs/twitter-for-websites/cards/overview/abouts-cards">Twitter Cards</a>에 대해 알아야 한다. 웹 페이지에 적절한 <a href="http://en.wikipedia.org/wiki/Meta_element">메타 태그</a>를 추가해 주면 페이스북과 트위터에서 인식하고 올바른, 작성자가 의도한 미리보기를 보여준다. 기본적으로 <a href="https://twitter.com/zac_c">Zac Clancy</a>가 쓴 <a href="https://web.archive.org/web/20170306054219/http://blackglasses.me/2013/09/19/twitter-cards-facebook-open-graph-and-octopress/">Octopress에서 이 두 가지를 지원하는 글</a>에 상세히 설명되어 있다.</p></div><p class="post-continue"> <a href="/2014/02/24/support-facebook-open-graph-and-twitter-cards-on-octopress/">계속 읽기 &rarr;</a></p><li lang="ko"><header class="post-header"><h1 class="post-title"> <a class="post-link" href="https://www.imperialviolet.org/2014/02/22/applebug.html">Apple&#39;s SSL/TLS bug &rarr;</a></h1><p class="post-meta"> 2014년 2월 22일 • <a href="/categories/ios/">iOS</a> • <a href="/2014/02/22/apples-ssl-tls-bug/">Permalink</a></p></header><div class="post-content"><p>iOS 7.0.6, iOS 6.1.6, Apple TV 6.0.2가 <a href="https://9to5mac.com/2014/02/21/apple-releases-ios-7-0-6-ios-6-1-6-with-fixes/">배포됐다</a>. 애플에서 공개한 iOS 7.0.6의 <a href="http://support.apple.com/kb/HT6147">보안 문제</a>는 다음과 같다.</p><blockquote><p>Impact: An attacker with a privileged network position may capture or modify data in sessions protected by SSL/TLS</p><p>Description: Secure Transport failed to validate the authenticity of the connection. This issue was addressed by restoring missing validation steps.</p></blockquote><p>그런데 이 문제의 원인이 된 <a href="http://opensource.apple.com/source/Security/Security-55471/libsecurity_ssl/lib/sslKeyExchange.c">소스 코드</a>가 흥미롭다. Adam Langley의 <a href="https://www.imperialviolet.org/2014/02/22/applebug.html">이 버그에 관한 글</a>에 따르면 실제 소스(sslKeyExchange.c)는 이렇다.</p><div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">static</span> <span class="n">OSStatus</span>
<span class="nf">SSLVerifySignedServerKeyExchange</span><span class="p">(</span><span class="n">SSLContext</span> <span class="o">*</span><span class="n">ctx</span><span class="p">,</span> <span class="n">bool</span> <span class="n">isRsa</span><span class="p">,</span> <span class="n">SSLBuffer</span> <span class="n">signedParams</span><span class="p">,</span>
                                 <span class="kt">uint8_t</span> <span class="o">*</span><span class="n">signature</span><span class="p">,</span> <span class="n">UInt16</span> <span class="n">signatureLen</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">OSStatus</span>        <span class="n">err</span><span class="p">;</span>
    <span class="p">...</span>

    <span class="k">if</span> <span class="p">((</span><span class="n">err</span> <span class="o">=</span> <span class="n">ReadyHash</span><span class="p">(</span><span class="o">&amp;</span><span class="n">SSLHashSHA1</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">hashCtx</span><span class="p">))</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span>
        <span class="k">goto</span> <span class="n">fail</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">((</span><span class="n">err</span> <span class="o">=</span> <span class="n">SSLHashSHA1</span><span class="p">.</span><span class="n">update</span><span class="p">(</span><span class="o">&amp;</span><span class="n">hashCtx</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">clientRandom</span><span class="p">))</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span>
        <span class="k">goto</span> <span class="n">fail</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">((</span><span class="n">err</span> <span class="o">=</span> <span class="n">SSLHashSHA1</span><span class="p">.</span><span class="n">update</span><span class="p">(</span><span class="o">&amp;</span><span class="n">hashCtx</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">serverRandom</span><span class="p">))</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span>
        <span class="k">goto</span> <span class="n">fail</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">((</span><span class="n">err</span> <span class="o">=</span> <span class="n">SSLHashSHA1</span><span class="p">.</span><span class="n">update</span><span class="p">(</span><span class="o">&amp;</span><span class="n">hashCtx</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">signedParams</span><span class="p">))</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span>
        <span class="k">goto</span> <span class="n">fail</span><span class="p">;</span>
        <span class="k">goto</span> <span class="n">fail</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">((</span><span class="n">err</span> <span class="o">=</span> <span class="n">SSLHashSHA1</span><span class="p">.</span><span class="n">final</span><span class="p">(</span><span class="o">&amp;</span><span class="n">hashCtx</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">hashOut</span><span class="p">))</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span>
        <span class="k">goto</span> <span class="n">fail</span><span class="p">;</span>
    <span class="p">...</span>

<span class="nl">fail:</span>
    <span class="n">SSLFreeBuffer</span><span class="p">(</span><span class="o">&amp;</span><span class="n">signedHashes</span><span class="p">);</span>
    <span class="n">SSLFreeBuffer</span><span class="p">(</span><span class="o">&amp;</span><span class="n">hashCtx</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">err</span><span class="p">;</span>

<span class="p">}</span>
</code></pre></div></div><p>단지 <code class="language-plaintext highlighter-rouge">goto fail;</code> 라인이 하나 더 있어서 <code class="language-plaintext highlighter-rouge">if</code>문과 관계 없이 두 번째 <code class="language-plaintext highlighter-rouge">goto</code>문이 실행되어 signature verification을 무조건 통과하게 된다.</p><blockquote><p>Note the two <code class="language-plaintext highlighter-rouge">goto fail</code> lines in a row. The first one is correctly bound to the if statement but the second, despite the indentation, isn’t conditional at all. The code will always jump to the end from that second goto, <code class="language-plaintext highlighter-rouge">err</code> will contain a successful value because the SHA1 update operation was successful and so the signature verification will never fail.</p></blockquote><p>또한 OS X 10.9.1에는 아직 <a href="https://9to5mac.com/2014/02/22/apple-patched-a-major-ssl-bug-in-ios-yesterday-but-os-x-is-still-at-risk/">이 문제</a>가 있는 것으로 보인다.</p></div><li><header class="post-header"><h1 class="post-title"> <a class="post-link" href="/2014/01/20/ghost-in-the-shellcode-2014-inview-write-up/">Ghost in the Shellcode 2014: inview Write-up</a></h1><p class="post-meta"> Jan 20, 2014 • <a href="/categories/ctf/">CTF</a></p></header><div class="post-content"><h2 id="question-3-inview">Question 3 - inview</h2><blockquote><p>Points: 150</p><p>The key is in view, what is it? <a href="https://2014.ghostintheshellcode.com/inview-324b8fb59c14da0d5ca1fe2c31192d80cec8e155">File</a></p></blockquote><p>If the above link doesn’t work, please use this <a href="/downloads/2014/01/20/inview-324b8fb59c14da0d5ca1fe2c31192d80cec8e155">link</a>.</p><p>Extract file with this code:</p><div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">mv </span>inview-324b8fb59c14da0d5ca1fe2c31192d80cec8e155 inview-324b8fb59c14da0d5ca1fe2c31192d80cec8e155.xz
xz <span class="nt">-d</span> inview-324b8fb59c14da0d5ca1fe2c31192d80cec8e155.xz
</code></pre></div></div><p>Then we can see some trailing whitespace in <code class="language-plaintext highlighter-rouge">inview-324b8fb59c14da0d5ca1fe2c31192d80cec8e155</code>.</p><h2 id="how-to-highlight-trailing-whitespace-in-vim">How to Highlight Trailing Whitespace in Vim</h2><p>Add this code to your <code class="language-plaintext highlighter-rouge">.vimrc</code>:</p><div class="language-vim highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">highlight</span> ExtraWhitespace ctermbg<span class="p">=</span><span class="k">red</span> guibg<span class="p">=</span><span class="k">red</span>
autocmd <span class="nb">BufWinEnter</span> * <span class="k">match</span> ExtraWhitespace <span class="sr">/\s\+$/</span>
autocmd <span class="nb">InsertEnter</span> * <span class="k">match</span> ExtraWhitespace <span class="sr">//</span>
autocmd <span class="nb">InsertLeave</span> * <span class="k">match</span> ExtraWhitespace <span class="sr">/\s\+$/</span>
<span class="k">if</span> <span class="k">version</span> <span class="p">&gt;=</span> <span class="m">702</span>
  autocmd <span class="nb">BufWinLeave</span> * <span class="k">call</span> <span class="nb">clearmatches</span><span class="p">()</span>
end
</code></pre></div></div><p>Then <a href="http://www.vim.org">Vim</a> highlights trailing whitespace to red color.</p><h2 id="how-to-solve">How to Solve</h2><p>I felt something weird, so I converted the file to hex code. In Vim:</p><div class="language-vim highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">:</span>%<span class="p">!</span>xxd
</code></pre></div></div><p>Looking at whitespace, I realized there are <code class="language-plaintext highlighter-rouge">09(Tab)</code>, <code class="language-plaintext highlighter-rouge">0A(New Line)</code>, <code class="language-plaintext highlighter-rouge">20(Space)</code> with no rule. Right after that I came up with <a href="https://en.wikipedia.org/wiki/Whitespace_(programming_language)">Whitespace</a>. Also there is a <a href="https://naokikp.github.io/wsi/whitespace.html">interpreter written in JavaScript</a>. Almost done! Just copy and paste the file content to site and press ‘Exec’ button. If you want to execute it in local, you can use <a href="https://github.com/hostilefork/whitespacers">whitespacers</a>.</p><p>Finally the key is:</p><div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>WhitespaceProgrammingIsHard
</code></pre></div></div></div></ul><div class="pagination"> <a class="previous" href="/posts/9/">&laquo; Older</a> <a class="next" href="/posts/7/">Newer &raquo;</a></div></div></div></main><footer class="site-footer"><div class="wrapper"><p> Content on this site is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a><br /> &copy; 2013&ndash;2024 - <a href="/about/">Yous</a> - Powered by <a href="https://jekyllrb.com">Jekyll</a> &amp; <a href="https://github.com/yous/whiteglass">whiteglass</a> - Subscribe via <a href="https://yous.be/atom.xml">RSS</a></p></div></footer>
